<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Saving &amp; Loading | Heatgrids | 0.1.0-exp </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Saving &amp; Loading | Heatgrids | 0.1.0-exp ">
      
      <link rel="icon" href="../manual/images/favicon.png">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      <meta name="docfx:rel" content="../">
      <meta name="docfx:disablenewtab" content="true">
      
      <meta name="docfx:docurl" content="https://github.com/Cubusky/com.cubusky.heatgrids/blob/main/Documentation~/manual/Saving&amp;Loading.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">
  </head>

  <script type="module" src="./../public/docfx.min.js"></script>

  <script>
    const theme = localStorage.getItem('theme') || 'auto'
    document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
  </script>


  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../manual/images/logo.svg" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled="" placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" style="margin-top: -.65em; margin-left: -.8em" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="saving--loading">Saving &amp; Loading</h1>

<p>Saving &amp; Loading is one of the most important aspects of Heatgrids, as it makes decisions about what data is important enough to store, and what data is important enough of collect. Because of this, Heatgrid exposes its functionality through interfaces.</p>
<p>Derive from <code>IHeatgridSaver</code> to implement a custom heatgrid saving solution, and derive from <code>IHeatgridLoader</code> to implement a custom heatgrid loading solution. Derive from <code>HeatgridRecorder</code> and <code>HeatgridLoader</code> respectively to expose these through components.</p>
<pre><code class="lang-csharp">[Serializable]
public class XmlFileSaver : IHeatgridSaver { ... }

[Serializable]
public class XmlDirectoryLoader : IHeatgridLoader { ... }

public sealed class HeatgridXmlRecorder : HeatgridRecorder
{
    [SerializeField] private Heatgrid _heatgrid = new();
    [SerializeField] private XmlFileSaver _saver = new();

    public override IHeatgrid heatgrid =&gt; _heatgrid;
    public override IHeatgridSaver saver =&gt; _saver;
}

public sealed class HeatgridXmlLoader : HeatgridLoader
{
    [SerializeField] private XmlDirectoryLoader _loader = new();

    public override IHeatgridLoader loader =&gt; _loader;
}
</code></pre>
<h2 id="json-solution">Json Solution</h2>
<p>Heatgrid comes builtin with a Json solution for saving &amp; loading. Simply add a <code>HeatgridJsonRecorder</code> to the player character to start recording data about the player. This will save heatgrids to Unity's <a href="https://docs.unity3d.com/ScriptReference/Application-persistentDataPath.html">persistent data path</a>.</p>
<blockquote>
<p>[!INFO]
Be aware that Heatgrids provides no out of the box solution for sending data to a server. It is recommended to implement a solution that sends (new) user data to a server at the end of their playing session.</p>
</blockquote>
<p>To load heatgrids from the <a href="https://docs.unity3d.com/ScriptReference/Application-persistentDataPath.html">persistent data path</a>, use a <code>HeatgridJsonLoader</code> and it will collect all the heatgrids that have been saved and combine them into 1 large heatgrid.</p>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/Cubusky/com.cubusky.heatgrids/blob/main/Documentation~/manual/Saving&amp;Loading.md/#L1" class="edit-link">Edit this page</a>
        </div>


      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made by <a href="https://github.com/Cubusky" target="_blank">Cubusky</a> using <a href="https://dotnet.github.io/docfx" target="_blank">DocFX</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>
